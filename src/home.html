<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptonita</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4-4.1.1/jq-3.3.1/dt-1.10.24/sl-1.3.3/datatables.min.css"/>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4-4.1.1/jq-3.3.1/dt-1.10.24/sl-1.3.3/datatables.min.js"></script>
</head>
<body class="d-flex flex-column h-100">
    <header>
        <nav class="navbar navbar-light bg-light">
            <span class="ml-auto mr-auto navbar-text h3">
                Cryptonita : An API for last hour price of crypto currencies
            </span>
        </nav>
    </header>
    <main role="main" class="flex-shrink-0">
        <div class="container">
            <div class="mt-2">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <a class="nav-link active" id="nav-t0-tab" data-toggle="tab" href="#nav-t0" role="tab" aria-controls="nav-t0" aria-selected="true">URL</a>
                    <a class="nav-link" id="nav-t1-tab" data-toggle="tab" href="#nav-t1" role="tab" aria-controls="nav-t1" aria-selected="true">Excel</a>
                    <a class="nav-link" id="nav-t2-tab" data-toggle="tab" href="#nav-t2" role="tab" aria-controls="nav-t2" aria-selected="false">Google Sheet</a>
                    <a class="nav-link" id="nav-t3-tab" data-toggle="tab" href="#nav-t3" role="tab" aria-controls="nav-t3" aria-selected="false">Planilha Excel</a>
                    <a class="nav-link" id="nav-t4-tab" data-toggle="tab" href="#nav-t4" role="tab" aria-controls="nav-t4" aria-selected="false">Planilha Google</a>
                    <a class="nav-link" id="nav-t5-tab" data-toggle="tab" href="#nav-t5" role="tab" aria-controls="nav-t5" aria-selected="false">NodeJS</a>
                    <a class="nav-link" id="nav-t6-tab" data-toggle="tab" href="#nav-t6" role="tab" aria-controls="nav-t6" aria-selected="false">Python</a>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-t0" role="tabpanel" aria-labelledby="nav-t0-tab">
                        <pre class="font-monospace"><a class="url" href="" target="_blank"><code></code></a></pre>
                    </div>
                    <div class="tab-pane fade" id="nav-t1" role="tabpanel" aria-labelledby="nav-t1-tab">
                        <pre class="font-monospace url">=WEBSERVICE("<code></code>")</pre>
                    </div>
                    <div class="tab-pane fade" id="nav-t2" role="tabpanel" aria-labelledby="nav-t2-tab">
                        <pre class="font-monospace url">=IMPORTDATA("<code></code>")</pre>
                    </div>
                    <div class="tab-pane fade" id="nav-t3" role="tabpanel" aria-labelledby="nav-t3-tab">
                        <pre class="font-monospace url">=SUBSTITUIR(SERVIÃ‡OWEB("<code></code>"); "."; ",")</pre>
                    </div>
                    <div class="tab-pane fade" id="nav-t4" role="tabpanel" aria-labelledby="nav-t4-tab">
                        <pre class="font-monospace url">=VALUE(SUBSTITUTE(IMPORTDATA("<code></code>");".";","))</pre>
                    </div>
                    <div class="tab-pane fade" id="nav-t5" role="tabpanel" aria-labelledby="nav-t5-tab">
                        <pre class="url">
    const axios = require('axios');
    axios.get('<code></code>')
        .then(response => {
            console.log(response.data);
        })
        .catch(error => {
            console.log(error);
        });</pre>
                    </div>
                    <div class="tab-pane fade" id="nav-t6" role="tabpanel" aria-labelledby="nav-t6-tab">
                        <pre class="url">import urllib.request, json
    contents = json.loads(urllib.request.urlopen("<code></code>").read())
    print(contents)</pre>
                    </div>
                </div>
            </div>
            <p class="mt-3 mb-3 text-center">Select a currency, search and select the coin bellow. See the code in tabs above</p>

            <div class="form-row mb-4">
                <label for="currency">Currency</label>
                <select id="currency" class="custom-select">
                    <option value="aed">AED - UAE Dirham</option>
                    <option value="ars">ARS - Argentine Peso</option>
                    <option value="aud">AUD - Australian Dollar</option>
                    <option value="bdt">BDT - Taka</option>
                    <option value="bhd">BHD - Bahraini Dinar</option>
                    <option value="bmd">BMD - Bermudian Dollar</option>
                    <option value="brl">BRL - Brazilian Real</option>
                    <option value="btc">BTC - Bitcoin</option>
                    <option value="cad">CAD - Canadian Dollar</option>
                    <option value="chf">CHF - Swiss Franc</option>
                    <option value="clp">CLP - Chilean Peso</option>
                    <option value="cny">CNY - Yuan</option>
                    <option value="czk">CZK - Czech Koruna</option>
                    <option value="dkk">DKK - Danish Krone</option>
                    <option value="eur">EUR - Euro</option>
                    <option value="gbp">GPB - Pound Sterling</option>
                    <option value="hkd">HKD - Hong Kong Dollar</option>
                    <option value="huf">HUF - Forint</option>
                    <option value="idr">IDR - Rupiah</option>
                    <option value="ils">ILS - New Israeli Shekel</option>
                    <option value="inr">INR - Indian Rupee</option>
                    <option value="jpy">JPY - Yen</option>
                    <option value="krw">KRW - South Korean Won</option>
                    <option value="kwd">KWD - Kuwaiti Dinar</option>
                    <option value="lkr">LKR - Sri Lanka Rupee</option>
                    <option value="mmk">MMK - Kyat</option>
                    <option value="mxn">MXN - Mexican Peso</option>
                    <option value="myr">MYR - Malaysian Ringgit</option>
                    <option value="ngn">NGN - Naira</option>
                    <option value="nok">NOK - Norwegian Krone</option>
                    <option value="nzd">NZD - New Zealand Dollar</option>
                    <option value="php">PHP - Philippine Peso</option>
                    <option value="pkr">PKR - Pakistan Rupee</option>
                    <option value="pln">PLN - PZloty</option>
                    <option value="rub">RUB - Russian Ruble</option>
                    <option value="sar">SAR - Saudi Riyal</option>
                    <option value="sats">SATS - Satoshi</option>        
                    <option value="sek">SEK - Swedish Krona</option>
                    <option value="sgd">SGD - Singapore Dollar</option>
                    <option value="thb">THB - Baht</option>
                    <option value="try">TRY - Turkish Lira</option>
                    <option value="twd">TWD - Taiwan Dollar</option>
                    <option value="uah">UAH - Hryvnia</option>
                    <option value="usd" seLected>USD - US Dollar</option>
                    <option value="vef">VEF - Bolivar Fuerte</option>
                    <option value="vnd">VND - Dong</option>
                    <option value="zar">ZAR - Rand</option>
                </select>
            </div>

            <table id="coins" class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>Id</th>
                    <th>Symbol</th>
                    <th>Name</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </main>
    <footer class="footer">
        <div class="bg-light mt-4 pt-2 pb-2">
            <div class="container">
                This API is based on <a href="https://www.coingecko.com/en/api" target="_blank">Coingecko public API</a>
                - Open source at <a href="https://github.com/pagotti/cryptonita" target="_blank">Github</a>
            </div>
        </div>
    </footer>

    <script>
        var c_coin = "bitcoin", c_currency = "usd";

        function formatUrl() {
            var host = location.protocol + "//" + location.hostname + (location.port ? ":" + location.port : "");
            var endpoint = host + "/price/" + c_currency + "?plain=1&coin=" + c_coin;
            $(".url code").text(endpoint); 
            $(".url[href]")[0].href = endpoint;
        }

        $(document).ready( function () {
            formatUrl();
            $("#currency").on("input", function (e) { 
                c_currency = e.target.value;
                formatUrl();
            });
            var t = $('table').DataTable({ 
                ajax: {
                    url: '/data/coinlist',
                    dataSrc: ""
                },
                columns: [
                    { "data": "id" },
                    { "data": "symbol" },
                    { "data": "name" }
                ],
                select: 'single' 
            });
            t.on('select', function ( e, dt, type, indexes ) {
                if (type === 'row') {
                    var data = dt.rows(indexes).data();
                    console.log(data);
                    c_coin = data[0]["id"];
                    formatUrl();
                }
            } );            
        } );
    </script>
</body>
</html>